def ASSET_DIR = "${projectDir}/src/main/assets"
def MODEL_FILES = [
        [url: 'https://github.com/oist/smartphone-robot-object-detection/releases/download/0.1.1/model.tflite', name: 'model.tflite'],
        [url: 'https://storage.googleapis.com/download.tensorflow.org/models/tflite/task_library/object_detection/android/lite-model_efficientdet_lite0_detection_metadata_1.tflite', name: 'efficientdet-lite0.tflite'],
        [url: 'https://storage.googleapis.com/download.tensorflow.org/models/tflite/task_library/object_detection/android/lite-model_efficientdet_lite1_detection_metadata_1.tflite', name: 'efficientdet-lite1.tflite']
]

tasks.register('downloadModelFiles') {
    doLast {
        MODEL_FILES.each { file ->
            download.run {
                src file.url
                dest "${ASSET_DIR}/${file.name}"
                overwrite false
            }
        }
    }
}

preBuild.dependsOn downloadModelFiles
